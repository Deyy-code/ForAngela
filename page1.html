<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Happy Girlfriend's Day!</title>
  <link rel="icon" href="path/to/heart_favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
</head>
<body>
  <div class="floating-background"></div>

  <div class="page-wrapper">
    <div class="header bebas-neue-regular">
      <h1>LOOK, BABY! <br>A LETTER CAME FOR YOU!</h1>
    </div>

    <div class="container">
      <div class="envelope-wrapper shake" id="shakyEnvelope">
        <div class="envelope">
          <div class="letter">
            <div class="text">
              <em><b>My Dearest Angela,</b></em><br><br>
              <p>You are the hush between my thoughts,</p>
              <p>the gentle light I look for at day's end.</p><br>
              <p>I may not be the perfect girlfriend, but I promise that I'll try my best to be a better one.</p><br>
              <p><em>Happy Girlfriend's Day!</em></p>
              <p><em>I love you.</em></p><br>
              <em><b>Ever yours,</b></em>
              <p>Dea</p>
            </div>
          </div>
        </div>
        <div class="heart"></div>
        <div class="heart-pop-container"></div>
      </div>

      <div class="message-before-playlist">
        <p>TOUCH THE LETTER TO OPEN IT!</p>
      </div>

      <div class="down-arrow" style="display: none;">
        <span>&#x25BC;</span>
      </div>

      <div id="spotifyPrompt" class="spotify-question hidden-on-load">
        <p>Click here if you Love Me!</p>
        <button onclick="location.href='spotify.html'">I Love You</button>
      </div>
  </div>
  <div class="floating-shapes">
  <!-- You can duplicate and randomize positions in JS -->
  <span style="left: 10%; animation-delay: 0s;"></span>
  <span style="left: 25%; animation-delay: 2s;"></span>
  <span class="star" style="left: 40%; animation-delay: 4s;"></span>
  <span style="left: 60%; animation-delay: 1s;"></span>
  <span class="star" style="left: 75%; animation-delay: 3s;"></span>
  <span style="left: 85%; animation-delay: 5s;"></span>
</div>

<script>
const envelope = document.querySelector('.envelope-wrapper');
const letter = document.querySelector('.letter');
const arrow = document.querySelector('.down-arrow');
const spotifyPrompt = document.getElementById('spotifyPrompt');
const spotifySection = document.getElementById('spotifyEmbed');
let opened = false;
let userHasScrolled = false;

// Hide arrow initially
arrow.style.display = 'none';

window.addEventListener('scroll', () => userHasScrolled = true);
window.addEventListener('touchmove', () => userHasScrolled = true);

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting && userHasScrolled && opened) {
      entry.target.classList.add('show-on-scroll');
      observer.unobserve(entry.target);
    }
  });
}, { threshold: 0.2 });

envelope.addEventListener('click', () => {
  if (opened) return;
  opened = true;
  envelope.classList.remove('shake');
  envelope.classList.add('flap');
  popHearts();

  setTimeout(() => {
    envelope.classList.add('open');
    letter.classList.add('slide-sequence');
    continuousHearts();
    arrow.style.display = 'block';

    document.querySelectorAll('.hidden-on-load').forEach(el => {
  observer.observe(el);
});


  }, 800);
});

function popHearts() {
  const container = document.querySelector('.envelope-wrapper');
  let count = 0;
  const totalHearts = 30;
  const interval = setInterval(() => {
    if (count >= totalHearts) {
      clearInterval(interval);
      return;
    }
    createHeart(container);
    count++;
  }, 150);
}

function continuousHearts() {
  const container = document.querySelector('.envelope-wrapper');
  setInterval(() => {
    createHeart(container);
  }, 800);
}

function createHeart(container) {
  const heart = document.createElement('div');
  heart.classList.add('flying-heart');
  heart.style.left = `${Math.random() * 100}%`;
  heart.style.animationDuration = `${1 + Math.random()}s`;
  heart.style.fontSize = `${10 + Math.random() * 20}px`;
  container.appendChild(heart);
  setTimeout(() => heart.remove(), 5000);
}


</script>


<script>
const shapeContainer = document.querySelector('.floating-shapes');

function createShape(className, count) {
  for (let i = 0; i < count; i++) {
    const span = document.createElement('span');
    span.className = className;
    span.style.left = Math.floor(Math.random() * 100) + '%';
    span.style.animationDelay = Math.random() * 5 + 's';
    shapeContainer.appendChild(span);
  }
}

createShape('circle', 6);
createShape('star', 6);
</script>
</body>
</html>
